<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>i01ortal</title>
  
  <subtitle>My Conquest Is the Sea of Stars</subtitle>
  <link href="http://i01ortal.tk/atom.xml" rel="self"/>
  
  <link href="http://i01ortal.tk/"/>
  <updated>2021-07-23T03:18:29.699Z</updated>
  <id>http://i01ortal.tk/</id>
  
  <author>
    <name>i01ortal</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>博客搭建</title>
    <link href="http://i01ortal.tk/2021/07/21/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    <id>http://i01ortal.tk/2021/07/21/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</id>
    <published>2021-07-21T16:52:28.000Z</published>
    <updated>2021-07-23T03:18:29.699Z</updated>
    
    <content type="html"><![CDATA[<h1 id="博客搭建"><a href="#博客搭建" class="headerlink" title="博客搭建"></a>博客搭建</h1><h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><h3 id="安装-node-js-和-Git"><a href="#安装-node-js-和-Git" class="headerlink" title="安装 node.js 和 Git"></a>安装 node.js 和 Git</h3><p>Hexo 基于 Node.js，搭建过程中还需要使用 npm（Node.js 已带） 和 git，因此先搭建本地操作环境，安装 Node.js 和 Git。</p><p>Node.js: <a href="https://nodejs.org/">https://nodejs.org/</a></p><p>Git: <a href="https://git-scm.com/">https://git-scm.com/</a></p><span id="more"></span><p>下载安装基本默认，点击下一步直到安装完成。</p><p>验证是否安装完成：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node -v </span><br><span class="line">npm -v </span><br><span class="line">git --version</span><br></pre></td></tr></table></figure><h3 id="配置Github"><a href="#配置Github" class="headerlink" title="配置Github"></a>配置Github</h3><p>打开 Git Bash,  设置 git 代理：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">设置代理：</span><br><span class="line">git config --global http.proxy &#x27;http://127.0.0.1:1080&#x27; </span><br><span class="line">git config --global https.proxy &#x27;https://127.0.0.1:1080&#x27;</span><br><span class="line"></span><br><span class="line">查看代理：</span><br><span class="line">git config --global --get http.proxy</span><br><span class="line">git config --global --get https.proxy</span><br><span class="line"></span><br><span class="line">取消代理：</span><br><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>设置用户名和邮箱</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;Name&quot;</span><br><span class="line">git config --global user.email &quot;Email&quot;</span><br></pre></td></tr></table></figure><p>创建SSH密钥：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;Name&quot;</span><br></pre></td></tr></table></figure><p>查看密钥：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat C:/User/用户名/.ssh id_rsa.pub</span><br></pre></td></tr></table></figure><p>登录 Github 进入 Settings 页面，选择 SSH and GPG keys ，点击 New SSH key。Title 随便取个名字，粘贴复制的 id_rsa.pub 内容到 Key 中，点击 Add SSH key 完成添加</p><p><img src="/2021/07/21/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/image-20210715090449869.png" alt="image-20210715090449869"></p><p>验证连接：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>出现 You’ve successfully authenticated…. 即连接成功</p><p>创建 Github Pages 仓库：</p><p>GitHub 主页右上角加号 -&gt; New repository，Repository name 中输入  name.github.io , 选择Add a README file , 填好后点击 Create repository 创建。</p><p><img src="/2021/07/21/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/image-20210715091651156.png" alt="image-20210715091651156"></p><p>创建后默认自动启用 HTTPS，博客地址为<code>https://i01ortal.github.io</code></p><h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><p>创建一个空文件夹来存在 Hexo 的文件，在该处打开 Git bash。</p><p>设置 npm 源:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>安装 hexo :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>Hexo 初始化和安装组件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init      # 初始化npm install    # 安装组件</span><br></pre></td></tr></table></figure><p>完成后启动本地服务器预览：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g   # 生成页面hexo s   # 启动预览</span><br></pre></td></tr></table></figure><p>访问 <a href="http://localhost:4000，">http://localhost:4000，</a> 出现 Hexo 默认页面</p><p>Hexo 目录结构：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">|-- _config.yml//网站的全局配置文件</span><br><span class="line">|-- node_modules//nodejs库文件</span><br><span class="line">|-- scaffolds//模板文件</span><br><span class="line">|-- source//文章保存文件夹</span><br><span class="line">   |-- _posts//文章保存目录</span><br><span class="line">|-- public//编译后indexd等存放</span><br><span class="line">|-- themes//主题</span><br><span class="line">|-- .gitignore//声明不被 git 记录</span><br><span class="line">|-- db.json//source目录下数据</span><br><span class="line">|-- package.json//框架的基本参数信息</span><br><span class="line">|-- package-lock.json//上面备份</span><br></pre></td></tr></table></figure><h2 id="Next-主题配置"><a href="#Next-主题配置" class="headerlink" title="Next 主题配置"></a>Next 主题配置</h2><p>安装 Next :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd your-hexo-sitegit clone https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p>打开站点配置文件 <code>_config.yml</code> ，找到 <code>theme</code> 字段，并将其值更改为 <code>next</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: next</span><br></pre></td></tr></table></figure><p>验证主题：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s --debug</span><br></pre></td></tr></table></figure><p>访问报错：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends ‘_layout.swig‘ %&#125; &#123;% import ‘_macro/post.swig‘ as post_template %&#125;.....</span><br></pre></td></tr></table></figure><p>hexo在5.0之后把 swig 给删除了需要自己手动安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-renderer-swig</span><br></pre></td></tr></table></figure><p>无其他错误后本地访问：</p><p><img src="/2021/07/21/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/image-20210715094704582.png" alt="image-20210715094704582"></p><h2 id="上传Github"><a href="#上传Github" class="headerlink" title="上传Github"></a>上传Github</h2><p>freenom 域名注册：</p><p>freenom 能免费注册域名，且可以匿名注册，<a href="https://freenom.com/">https://freenom.com</a> .</p><p><img src="/2021/07/21/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/image-20210722085650816.png" alt="image-20210722085650816"></p><p>设置 dns 指向 github :</p><p><img src="/2021/07/21/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/image-20210722100231015.png" alt="image-20210722100231015"></p><p><img src="/2021/07/21/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/image-20210722100321663.png" alt="image-20210722100321663"></p><p>在 source 目录下新建 CNAME 文件：</p><p><img src="/2021/07/21/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/image-20210722101117861.png" alt="image-20210722101117861"></p><p>更改网站配置处 deploy :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/i01ortal-Blog</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>安装 hexo-deploy-git 插件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deploy-git --save</span><br></pre></td></tr></table></figure><p>hexo 上传 github :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean </span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p><img src="/2021/07/21/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/image-20210722193559202.png" alt="image-20210722193559202"></p><p>到此博客搭建完成。</p><h2 id="发布文章"><a href="#发布文章" class="headerlink" title="发布文章"></a>发布文章</h2><p>写文章需要插入图片时，安装 hexo-asset-image :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure><p>该插件存在问题需修改下 hexo-asset-image 目录下 index.js</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&#x27;use strict&#x27;;</span><br><span class="line">var cheerio = require(&#x27;cheerio&#x27;);</span><br><span class="line"></span><br><span class="line">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span><br><span class="line">function getPosition(str, m, i) &#123;</span><br><span class="line">  return str.split(m, i).join(m).length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var version = String(hexo.version).split(&#x27;.&#x27;);</span><br><span class="line">hexo.extend.filter.register(&#x27;after_post_render&#x27;, function(data)&#123;</span><br><span class="line">  var config = hexo.config;</span><br><span class="line">  if(config.post_asset_folder)&#123;</span><br><span class="line">    var link = data.permalink;</span><br><span class="line">if(version.length &gt; 0 &amp;&amp; Number(version[0]) == 3)</span><br><span class="line">   var beginPos = getPosition(link, &#x27;/&#x27;, 1) + 1;</span><br><span class="line">else</span><br><span class="line">   var beginPos = getPosition(link, &#x27;/&#x27;, 3) + 1;</span><br><span class="line">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span><br><span class="line">var endPos = link.lastIndexOf(&#x27;/&#x27;) + 1;</span><br><span class="line">    link = link.substring(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    var toprocess = [&#x27;excerpt&#x27;, &#x27;more&#x27;, &#x27;content&#x27;];</span><br><span class="line">    for(var i = 0; i &lt; toprocess.length; i++)&#123;</span><br><span class="line">      var key = toprocess[i];</span><br><span class="line"> </span><br><span class="line">      var $ = cheerio.load(data[key], &#123;</span><br><span class="line">        ignoreWhitespace: false,</span><br><span class="line">        xmlMode: false,</span><br><span class="line">        lowerCaseTags: false,</span><br><span class="line">        decodeEntities: false</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(&#x27;img&#x27;).each(function()&#123;</span><br><span class="line">if ($(this).attr(&#x27;src&#x27;))&#123;</span><br><span class="line">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span><br><span class="line">var src = $(this).attr(&#x27;src&#x27;).replace(&#x27;\\&#x27;, &#x27;/&#x27;);</span><br><span class="line">if(!/http[s]*.*|\/\/.*/.test(src) &amp;&amp;</span><br><span class="line">   !/^\s*\//.test(src)) &#123;</span><br><span class="line">  // For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span><br><span class="line">  // In addition, to support multi-level local directory.</span><br><span class="line">  var linkArray = link.split(&#x27;/&#x27;).filter(function(elem)&#123;</span><br><span class="line">return elem != &#x27;&#x27;;</span><br><span class="line">  &#125;);</span><br><span class="line">  var srcArray = src.split(&#x27;/&#x27;).filter(function(elem)&#123;</span><br><span class="line">return elem != &#x27;&#x27; &amp;&amp; elem != &#x27;.&#x27;;</span><br><span class="line">  &#125;);</span><br><span class="line">  if(srcArray.length &gt; 1)</span><br><span class="line">srcArray.shift();</span><br><span class="line">  src = srcArray.join(&#x27;/&#x27;);</span><br><span class="line">  $(this).attr(&#x27;src&#x27;, config.root + link + src);</span><br><span class="line">  console.info&amp;&amp;console.info(&quot;update link as:--&gt;&quot;+config.root + link + src);</span><br><span class="line">&#125;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">console.info&amp;&amp;console.info(&quot;no src attr, skipped...&quot;);</span><br><span class="line">console.info&amp;&amp;console.info($(this));</span><br><span class="line">&#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.html();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>markdown 编辑器 ：</p><p>推荐使用 Typora 来进行文章编写，下载地址：</p><p><a href="https://typora.io/">https://typora.io/</a></p><p>文章折叠：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">This is a page.</span><br><span class="line">.....</span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line">.....</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>每次发布文章则需要执行下面命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>文章目录设置：</p><p>在 custom.styl 文件中添加 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//文章目录默认展开</span><br><span class="line">.post-toc .nav .nav-child &#123; display: block; &#125;</span><br><span class="line">.post-toc ol &#123;  </span><br><span class="line">  font-size : 13px;     </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>点击中文目录无法跳转：</p><p>修改 js/src/post-details.js 文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 第75行下添加</span><br><span class="line">targetSelector = decodeURI(this.getAttribute(&#x27;href&#x27;)) //对获取到url重编码</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;博客搭建&quot;&gt;&lt;a href=&quot;#博客搭建&quot; class=&quot;headerlink&quot; title=&quot;博客搭建&quot;&gt;&lt;/a&gt;博客搭建&lt;/h1&gt;&lt;h2 id=&quot;环境搭建&quot;&gt;&lt;a href=&quot;#环境搭建&quot; class=&quot;headerlink&quot; title=&quot;环境搭建&quot;&gt;&lt;/a&gt;环境搭建&lt;/h2&gt;&lt;h3 id=&quot;安装-node-js-和-Git&quot;&gt;&lt;a href=&quot;#安装-node-js-和-Git&quot; class=&quot;headerlink&quot; title=&quot;安装 node.js 和 Git&quot;&gt;&lt;/a&gt;安装 node.js 和 Git&lt;/h3&gt;&lt;p&gt;Hexo 基于 Node.js，搭建过程中还需要使用 npm（Node.js 已带） 和 git，因此先搭建本地操作环境，安装 Node.js 和 Git。&lt;/p&gt;
&lt;p&gt;Node.js: &lt;a href=&quot;https://nodejs.org/&quot;&gt;https://nodejs.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Git: &lt;a href=&quot;https://git-scm.com/&quot;&gt;https://git-scm.com/&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="blog" scheme="http://i01ortal.tk/categories/blog/"/>
    
    
    <category term="blog" scheme="http://i01ortal.tk/tags/blog/"/>
    
  </entry>
  
</feed>
